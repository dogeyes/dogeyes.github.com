---
layout: post
title: "chapter3 LCLSS"
description: ""
category: LCLSS
tags: [学习, linux, command line, LCLSS]
---
{% include JB/setup %}

# chapter3 基本的bash shell命令

## 3.1 启动shell

`/etc/passwd`文件包含了所有系统用户账户列表以及每个用户的基本配置信息.

     root:*:0:0:System Administrator:/var/root:/bin/sh

七个字段

1. 用户名
2. 密码
3. 用户的系统UID(用户ID)
4. 用户的系统GID(组ID)
5. 用户的全名
6. 用户的默认主目录
7. 用户默认的shell程序

bash程序同样使用命令行参数来修改所启动shell的类型,bash支持的可定义启动shell类型的命令行参数

<table>

  <tr>
    <td>-c string</td>
	<td>从string中读取命令并处理他们</td>
  </tr>
  
  <tr>
    <td>-r</td>
	<td>启动限制性shell,限制用户在默认目录下活动</td>
  </tr>
  
  <tr>
    <td>-i</td>
	<td>启动交互行shell,允许用户输入</td>
  </tr>
  
  <tr>
    <td>-s</td>
	<td>从标准输入读取命令</td>
  </tr>
</table>

默认情况下,bash shell启动时会自动处理用户主目录下的`.bashrc`文件中的命令.许多linux发行版在此文件中加载特殊的**共用文件**,在共用文件中保存着针对所有系统用户的命令和设置,共用文件位于`/etc/bashrc`,它经常设置各种应用程序中用到的环境变量

## 3.2 shell提示符

bash shell提示符(默认$)

有两个环境变量用来控制命令行提示符的格式:

* PS1: 控制默认命令提示符的格式
* PS2: 控制后续命令提示符的格式

     echo $PS1
	 
	 echo $PS2
	 
***
bash shell提示符字符
***

可以通过设定PS1和PS2来改变提示符,但是这个提示符只在当前shell下有用,重新开启后又是默认的提示符

     PS1="\t"

提示符变为时间

## 3.3 bash手册

     man date
	 
查找`date`命令的bash 手册

    man bash
	
通过空格下翻,也可以通过上下键来翻页,`q`退出

## 3.4 浏览文件系统

### 3.4.1 Linux文件系统

Linux将文件存储在单个目录结构中,这个目录我们称为**虚拟目录(virtual directory)**.

**根(root)**目录

Linux用`/`来划分目录.`\`用来转义

第一块硬盘为**根**驱动器,包含了虚拟目录的核心,其他目录都是从这里开始构建的.

虚拟目录会让文件和目录出现在这些挂载点目录中,然而实际上他们却存储在另外一个驱动器中.

通常系统文件会存储在根驱动器中,而用户文件则存储在另一驱动器中.

常见linux目录名称

<table border="1">
  <tr>
   <td>/</td>
   <td>虚拟目录的根目录</td>
  </tr>
  <tr>
   <td>/bin</td>
   <td>二进制目录,存放许多GNU用户级工具</td>
  </tr>
  <tr>
   <td>/boot</td>
   <td>启动目录,存放启动文件</td>
  </tr>
  <tr>
   <td>/dev</td>
   <td>设备目录,Linux在这里创建设备节点</td>
  </tr>
  <tr>
   <td>/etc</td>
   <td>系统配置文件目录</td>
  </tr>
  <tr>
   <td>/home</td>
   <td>主目录,Linux在这里创建用户目录</td>
  </tr>
  <tr>
   <td>/lib</td>
   <td>库目录,存放系统和应用程序的库文件</td>
  </tr>
  <tr>
   <td>/media</td>
   <td>媒体目录,存放可移动媒体设备挂载点的地方</td>
  </tr>
  <tr>
   <td>/mnt</td>
   <td>挂载目录,另一个存放可移动媒体设备挂载点的地方</td>
  </tr>
  <tr>
   <td>/opt</td>
   <td>可选目录,通常用于存放可选的软件包</td>
  </tr>
  <tr>
   <td>/root</td>
   <td>根主目录</td>
  </tr>
  <tr>
   <td>/sbin</td>
   <td>系统二进制目录,存放许多GNU管理员级工具</td>
  </tr>
  <tr>
   <td>/tmp</td>
   <td>临时目录,可以在该目录中创建和删除临时工作文件</td>
  </tr>
  <tr>
   <td>/usr</td>
   <td>用户安装软件的目录</td>
  </tr>
  <tr>
   <td>/var</td>
   <td>可变目录,用于存放经常彼岸花的文件,比如日志文件</td>
  </tr>
</table>


### 3.4.2 遍历目录

`cd destination` 命令来切换目录到destination

* 绝对文件路径 以虚拟目录的根目录开始,相当于目录的全名
* 相对文件路径 基于当前位置的文件路径
    * 单点符(.),当前目录
	* 双点符(..), 当前目录的父目录
	
## 3.5 文件和目录列表

`ls` 命令显示系统上有哪些文件

### 3.5.1 基本列表功能

`ls` 最基本的格式会显示当前目录下的文件和目录

输出列表按字母排序(按列排序,而不是按行排序)

还支持不同的颜色区分不同类型的文件,`LS_COLORS` 环境变量控制这个功能

如果终端不支持彩色,可以用`-F`参数来区分文件和目录

隐藏文件以`.`开始,不会在一般ls下显示

`ls -a` 显示所有文件,包括隐藏文件

`-R` 列出目录下包含的目录中的文件

### 3.5.2 修改输出信息

`-l` 参数产生长列表格式,包含更多信息

* 文件类型
* 文件权限
* 文件硬链接总数
* 文件属主的用户名
* 文件属组的组名
* 文件的大小(字节为单位)
* 文件上次修改时间
* 文件名或目录名

### 3.5.3 完整的参数列表

`man` 之

* 单字母 通常`-`开始
* 全字参数 通常`--`开始

文件或目录的索引节点是内核分配给文件系统中每个对象的唯一标识符.

### 3.5.4 过滤输出列表

过滤器就是进行简单文字匹配的字符串,在命令行参数之后添加过滤器

通配符

* 问号代表一个字符
* 星号代表零个或多个字符

## 3.6 处理文件

### 3.6.1 创建文件

`touch test` 创建test文件

`touch` 还可以改变文件的访问时间和修改时间,而不改变文件的内容

`-a` 参数只改变访问时间,`-m` 参数只改变修改时间, `-t` 参数指定要修改的成的时间

### 3.6.2 复制文件

`cp source destination` 从源对象复制到目标对象

### 3.6.3 链接文件

虚拟副本-**链接**

* 符号链接,即软链接
* 硬链接

硬链接会创建一个独立的文件,包含源文件的信息以及位置,应用链接文件等同于引用源文件

`cp -l test1 test2` test2是test1的硬链接,两个文件的索引节点相同,链接计数增加

只能在同种存储媒体上的文件之间创建硬链接

`-s` 创建软连接

`ln` 也可创建链接,默认创建硬链接,`-s` 创建软链接

`cp` 命令来复制一个链接到另一个源文件的文件,复制的是源文件的副本,而不是链接文件.

可以创建指向源文件的新链接,而不用复制链接文件,可以创建指向同一文件的多个链接,但不要创建指向符号链接文件的多个符号链接,这样会生成一个链接文件链,容易混淆,而且容易断

### 3.6.4 重命名文件

`mv source dest` 将源文件移动到目标位置

移动有软链接指向的文件要小心,链接会失效

### 3.6.5 删除文件

`rm test` 删除test文件

硬链接会一直维持索引节点号,直到删除最后一个硬链接它的文件.软连接会无效

## 3.7 处理目录

### 3.7.1 创建目录

`mkdir`

### 3.7.2 删除目录

`rmdir` 默认只删除空目录

`rm -r dir2` 删除dir2目录下的文件和目录本身,但是会有提醒,加`-f`参数

### 3.8 查看文件内容

### 3.8.1 查看文件统计信息

`stat` 命令查看文件的所有状态信息

### 3.8.2 查看文件类型

`file` 命令查看文件类型

* 文本文件
* 可执行文件
* 数据文件

### 3.8.3 查看整个文件

#### 1 cat命令

`cat` 显示文件的内容 `-n` 行号

#### 2 more命令

`more` 显示文件

#### 3 less命令

     less is more
	 
### 3.8.4 查看部分文件

#### 1 tail命令

文件末尾部分,默认10行,可以参数`-n`设定

`-f` 参数让tail程序一直保持活动状态,有新内容加到末尾就显示

#### 2 head命令

文件开头的几行

