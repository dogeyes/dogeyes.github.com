<link href="/assets/themes/twitter/css/pygments.css" rel="stylesheet">

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>安装软件程序 chapter8 LCLSS</title>
    <meta name="description" content="">
    <meta name="author" content="dogeyes">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">dogeyes</a>
          <ul class="nav">
            
            
            


  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages.html">Pages</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  



          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="content">
        
<div class="page-header">
  <h1>安装软件程序 chapter8 LCLSS </h1>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="date">
      <span>23 December 2012</strong>
    </div>
    <div class="content">
      <h1>第8章 安装软件程序</h1>

<p>包管理系统(Package Management System, PMS)</p>

<h2>8.1 包管理基础</h2>

<p>PMS记录</p>

<ul>
<li>已安装软件包</li>
<li>每个包安装了什么文件</li>
<li>每个已安装软件包的版本</li>
</ul>


<p>软件包存储在服务器上 <strong>库(repository)</strong></p>

<p>依赖关系,PMS会自动检测依赖关系,并安全额外需要的软件包</p>

<p>PMS现在还没有标准工具</p>

<p>现存主要的PMS基础工具是<code>dpkg</code>和<code>rpm</code></p>

<p>基于Debian的发行版, 如Ubuntu和Linux Mint, PMS工具的底层用的是dpkg命令,与PMS交互,安装,管理和删除软件包</p>

<p>基于Red Hat的发行版, 比如Fedra,openSUSE和Mandriva, PMS工具的底层是rpm命令</p>

<p>这两个命令是PMS的核心,但不是全部,还会有一些额外的工具,使得管理简单</p>

<h2>8.2 基于Debian的系统</h2>

<p><code>dpkg</code> 是基于Debian系PMS工具的核心</p>

<ul>
<li>apt-get</li>
<li>apt-cache</li>
<li>aptitude</li>
</ul>


<p><code>aptitude</code> 本质上是apt工具和dpkg的前端, dpkg是一个软件包管理系统工具, aptitude则是一个完整的软件包管理系统</p>

<p>aptitude可以避免一些问题,如软件依赖关系缺失,系统环境不稳定以及其他一些不必要的麻烦</p>

<h3>8.2.1 用aptitude管理软件包</h3>

<p><code>aptitude</code> 来开启交互式程序</p>

<p>如果知道了系统上的那些软件包,显示特定包的详细信息</p>

<p><code>aptitude show package_name</code> 显示package_name包的详细信息,并不表示这个包已经安装了,只是显示从软件库中得到的详细的软件包信息</p>

<p>无法通过aptitude看到的一个细节是所有跟摸个特定软件包关联的所有文件的列表,要得到这个列表需要用<code>dpkg</code>命令</p>

<p><code>dpke -L package_name</code> 查找和package_name相关的所有文件</p>

<p><code>dpkg --search absolute_file_name</code> 可以反向查找某个特定文件属于哪个软件包</p>

<p>相当犀利啊</p>

<h3>8.2.2 用aptitude安装软件包</h3>

<p><code>aptitude search package_name_key_word</code> 查找特性的软件包</p>

<p>每个软件包前面有一个标示符<code>i</code>表示已经安装了,<code>p</code>表示未安装,<code>v</code>表示什么呢?</p>

<p><code>sudo aptitude install package_name</code> 安装package</p>

<p>要确认是否安装,用aptitude search搜索一下,标示符是否为<code>i</code></p>

<p>本地安装
<code>sudo dpkg -i software_name</code></p>

<h3>8.2.3 用aptitude更新软件</h3>

<p><code>aptitude safe-upgrade</code> 将包所有包更新到最新</p>

<ul>
<li><code>aptitude full-upgrade</code></li>
<li><code>aptitude dist-upgrade</code></li>
</ul>


<p>将所有软件包升级到到最新,于safe-upgrade的区别是不检查包与包之间的依赖关系.</p>

<p>刚安装完的系统尤其需要safe-upgrade</p>

<h3>8.2.4 用aptitude卸载软件</h3>

<p>只删除软件包但不删除数据和配置文件,可以用aptitude的<code>remove</code>选项,要删除软件包和相关数据和配置文件,可以用<code>purge</code>选项</p>

<p>看软件包是否删除,也可以用<code>aptitude search</code>选项, 如果软件包前面的标示符是<code>c</code>,意味着软件删除了,但是配置文件未删除,<code>p</code>表示配置文件也删除了</p>

<h3>8.2.5 aptitude库</h3>

<p><code>/etc/apt/sources.list</code> 存储着软件库</p>

<p>例子</p>

<pre><code>deb http://us.archive.ubuntu.com/ubuntu/ maverick main restricted

deb (or deb-src) address distribution_name package_type_list
</code></pre>

<p><code>deb(or deb-src)</code> 表明了软件包的类型,deb说明是编译后程序的源,deb-src是源代码源</p>

<p><code>address</code> 是软件库的web地址</p>

<p><code>distribution_name</code> 是特定软件库的发行版版本的名称,如这里是<code>maverick</code>,但是并不能说明你使用的是Ubuntu Maverick Mint, 只是说明Linux发行版本在用Linux Maverick Meercat软件库</p>

<p><code>package_type_list</code> 可能不止一个词,表名库里面有什么类型的包, main restricted universe partner</p>

<h2>8.3 基于Red Hat 的系统</h2>

<ul>
<li>yum</li>
<li>urpm</li>
<li>zypper</li>
</ul>


<p>这些前端都是基于rpm命令行工具的</p>

<h3>8.3.1 列出已安装包</h3>

<p><code>yum list installed</code></p>

<p><code>rpm -qa</code></p>

<p><code>zypper search -I</code></p>

<p><code>yum list package</code> 列出package,不一定已经安装</p>

<p><code>yum list installed package</code> 列出package是否安装</p>

<p><code>yum provides file_name</code> 查看file_name文件是什么软件的文件</p>

<h3>8.3.2 用yum安装软件</h3>

<p><code>yum install package_name</code> 安装package_name,自动安装依赖关系</p>

<p><code>su -</code> 切换好root用户</p>

<p><strong>本地安装(local installation)</strong></p>

<p><code>yum local install package_name.rpm</code></p>

<h3>8.3.3 用yum更新软件</h3>

<p><code>yum list updates</code> 列出所有针对已安装包的可用更新</p>

<p><code>yum update package_name</code> 更新package_name软件包</p>

<p><code>yum update</code> 更新所有软件</p>

<h3>8.3.4 用yum卸载软件</h3>

<p><code>yum remove package_name</code> 删除软件包,但保留配置文件和数据文件</p>

<p><code>yum erase package_name</code> 删除软件和数据</p>

<h3>8.3.5 处理损坏的包依赖关系</h3>

<p>在同时安装多个软件包时,某个包的软件以来关系可能会被另一个包的安装覆盖掉,<strong>损坏的包依赖关系</strong></p>

<p><code>yum clear all</code> 先试试这个命令,这命令干什么的?</p>

<p><code>yum update</code> 在试试更新</p>

<p><code>yum deplist package_name</code> 命令显示所有包的依赖关系以及什么软件可以提供这些库依赖关系,一旦知道某个包需要的库后就可以安装他们了</p>

<p>如果这些都还没解决</p>

<p><code>yum update --skip-broken</code> 忽略依赖关系损坏的包,更新其他软件包</p>

<h3>8.3.6 yum软件库</h3>

<p><code>yum repolist</code> 显示当前使用的软件库,库位于<code>/etc/yum.repos.d</code>, 需要添加正确的URL并获得必要的加密密匙</p>

<h2>8.4 从源码安装</h2>

<p><code>tar</code> 解压下载的软件包</p>

<p>阅读README</p>

<p><code>./configure</code> 根据系统配置软件,如使用正确的编译器, 正确的包以来关系等等</p>

<p><code>make</code> 安装文件,将源码编译成二进制可执行文件,完成后在目录下有可用程序</p>

<p><code>make install</code> 安装到Linux的一个常见的位置.</p>

    </div>

  
    <ul class="tag_box inline">
      <li><i class="icon-folder-open"></i></li>
      
      


  
     
    	<li><a href="/categories.html#LCLSS-ref">
    		LCLSS <span>23</span>
    	</a></li>
    
  


    </ul>
    

  
    <ul class="tag_box inline">
      <li><i class="icon-tags"></i></li>
      
      


  
     
    	<li><a href="/tags.html#LCLSS-ref">LCLSS <span>23</span></a></li>
     
    	<li><a href="/tags.html#linux-ref">linux <span>23</span></a></li>
     
    	<li><a href="/tags.html#commadn line-ref">commadn line <span>1</span></a></li>
     
    	<li><a href="/tags.html#学习-ref">学习 <span>34</span></a></li>
    
  



    </ul>
    

    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/LCLSS/2012/12/21/chapter7-lclss" title="管理文件系统 chapter7 LCLSS">&larr; Previous</a></li>
      
        <li><a href="/archive.html">Archive</a></li>
      
        <li class="next"><a href="/LCLSS/2012/12/25/chapter10-lclss" title="构建基本脚本 chapter10 LCLSS">Next &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'jekyllbootstrap'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




  </div>
</div>

      </div>
      <hr>
      <footer>
        <p>&copy; 2013 dogeyes
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </footer>

    </div>

    
  </body>
</html>

